<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>JTM Interaktif - Konstruksi Jaringan Tegangan Menengah</title>

<style>
  :root{
    --pln-blue: #0f3bb3;
    --pln-yellow: #ffd400;
    --accent: #ff5722;
    --bg: #19a1bb;
    --card: #ffffff;
    --muted: #556;
    --kop: #145c74;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Segoe UI", Roboto, Arial, sans-serif;
    background: linear-gradient(180deg, var(--card), var(--bg) 300%);
    color: #112;
  }

  header{
    padding: 18px 20px;
    display:flex;
    align-items:center;
    gap:12px;
    border-bottom: 1px solid rgba(0,0,0,0.06);
    background:linear-gradient(90deg, var(--kop), var(--bg) 40%);
  }
  header .logo-right {
  margin-left: auto;          /* Dorong ke kanan */
  display: flex;
  align-items: center;
}

header .logo-right img {
  height: 46px;               /* Atur tinggi logo */
  width: auto;
  border-radius: 6px;         /* Opsional: beri sedikit radius */
}
  header h1{
    margin:0;
    font-size:18px;
    color:var(--card);
  }
  header p{ margin:0; color:var(--card); font-size:13px }

  /* Layout */
  .wrap{
    display:flex;
    gap:20px;
    padding: 20px;
    max-width:1200px;
    margin: 0 auto;
  }

  /* Main area with image */
  .main {
    flex: 1 1 680px;
    min-width: 280px;
  }

  .image-card{
    background: var(--card);
    padding:12px;
    border-radius:12px;
    box-shadow: 0 6px 18px rgba(12,36,100,0.08);
    position:relative;
  }

  .container {
    position: relative;
    width: 100%;
    max-width: 820px;
    margin: 0 auto;
    overflow: visible;
  }

  .jtm-img {
    display:block;
    width:100%;
    height:auto;
    border-radius:8px;
    user-select: none;
  }

  /* Hotspot basic style */
  .hotspot {
    position: absolute;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--accent);
    color: white;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:700;
    cursor:pointer;
    box-shadow: 0 6px 14px rgba(0,0,0,0.18);
    transform: translate(-50%,-50%);
    transition: transform .18s ease, box-shadow .18s ease;
    z-index: 40;
  }

  .hotspot:hover { transform: translate(-50%,-50%) scale(1.14); }

  /* Highlight ring for active hotspot */
  .highlight {
    position:absolute;
    width: 64px;
    height: 64px;
    border-radius:50%;
    transform: translate(-50%,-50%);
    z-index:35;
    pointer-events:none;
    box-shadow: 0 0 0px 6px rgba(15,59,179,0.08), 0 0 30px rgba(15,59,179,0.12) inset;
    transition: opacity .25s ease, transform .25s ease;
    opacity:0;
  }

  .highlight.active {
    opacity:1;
    transform: translate(-50%,-50%) scale(1.02);
    box-shadow: 0 0 18px rgba(15,59,179,0.18), 0 0 0 6px rgba(255,212,0,0.12);
  }

  /* Popup overlay */
  .popup-bg {
    display:none;
    position: fixed;
    inset:0;
    background: rgba(4,8,20,0.45);
    z-index:200;
    align-items:center;
    justify-content:center;
    padding: 20px;
  }

  .popup-box {
    width: min(720px, 96%);
    background: var(--card);
    border-radius:12px;
    padding:18px;
    box-shadow: 0 18px 40px rgba(12,36,100,0.25);
    animation: popupIn .22s ease;
    position: relative;
  }

  @keyframes popupIn {
    from { opacity:0; transform: translateY(8px) scale(.99); }
    to   { opacity:1; transform: translateY(0) scale(1); }
  }

  .popup-header{
    display:flex; align-items:center; gap:12px;
  }
  .num-badge{
    min-width:44px; height:44px; border-radius:10px;
    background:var(--pln-blue); color:white;
    display:flex; align-items:center; justify-content:center; font-weight:700;
    font-size:18px;
  }
  .popup-title{ font-weight:700; color:var(--pln-blue); margin:0 0 6px 0; }
  .popup-desc{ margin:0; color:var(--muted); line-height:1.45; font-size:14px; }

  .popup-actions{ margin-top:12px; text-align:right; }
  .btn{
    display:inline-block; padding:8px 12px; border-radius:8px; border:none; cursor:pointer;
    font-weight:600;
  }
  .btn-close{ background: #eee; color:#333; margin-left:8px }
  .btn-link{ background:var(--pln-yellow); color: #08206b }

  /* Side panel list */
  .panel {
    width: 320px;
    min-width:220px;
  }

  .panel-card{
    background: var(--card);
    padding:12px;
    border-radius:12px;
    box-shadow: 0 6px 18px rgba(12,36,100,0.06);
    position: sticky;
    top: 20px;
    max-height: calc(100vh - 48px);
    overflow:auto;
  }

  .panel h3{ margin: 0 0 8px 0; color:var(--pln-blue) }
  .list-item{
    display:flex; gap:12px; align-items:flex-start;
    padding:8px; border-radius:8px; cursor:pointer;
  }
  .list-item:hover{ background: linear-gradient(90deg, rgba(15,59,179,0.04), transparent); }
  .list-number{
    width:36px; height:36px; border-radius:8px; background:var(--accent); color:#fff;
    display:flex;align-items:center;justify-content:center;font-weight:700;
  }
  .list-body{ font-size:14px; color: #213; }
  .small{ font-size:13px; color:var(--muted) }

  /* Responsive */
  @media (max-width:980px){
    .wrap{ flex-direction:column; padding:12px; gap:14px }
    .panel{ width:100% }
    .panel-card{ position:relative; top:auto; max-height:none }
  }

  @media (max-width:480px){
    .hotspot{ width:28px; height:28px; font-size:13px }
    .highlight{ width:56px; height:56px }
  }

</style>
</head>
<body>

<header>
  <div style="width:44px;height:44px;border-radius:8px;background:var(--pln-blue);display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:18px">
    JTM
  </div>
  <div>
    <h1>Konstruksi Jaringan Tegangan Menengah</h1>
    <p>Ketuk titik pada gambar atau pilih dari daftar untuk menampilkan informasi komponen.</p>
  </div>
  <div class="logo-right">
    <img src="PLN.png" alt="Logo PLN">
  </div>
</header>

<div class="wrap">
  <main class="main">
    <div class="image-card">
      <div class="container" id="imageContainer">
        <img src="JTM.PNG" alt="Gambar JTM" class="jtm-img" id="jtmImg">

        <!-- highlight element (re-used for any selected hotspot) -->
        <div id="highlight" class="highlight"></div>

        <!-- Hotspots akan dibuat lewat JS -->
      </div>
    </div>
  </main>

  <aside class="panel">
    <div class="panel-card">
      <h3>Daftar Komponen (Klik untuk detail)</h3>
      <div id="list"></div>
      <hr style="margin:10px 0;">
      <p class="small">Tema: <strong style="color:var(--pln-blue)">PLN</strong> — biru & kuning. 
      Fitur: highlight, popup fade-in, responsif.</p>
    </div>
  </aside>
</div>

<!-- Popup -->
<div id="popupBg" class="popup-bg" onclick="closePopup(event)">
  <div class="popup-box" role="dialog" aria-modal="true" onclick="event.stopPropagation()">
    <div class="popup-header">
      <div class="num-badge" id="popupNum">1</div>
      <div>
        <p class="popup-title" id="popupTitle">Nama Komponen</p>
        <p class="popup-desc" id="popupDesc">Deskripsi singkat komponen.</p>
      </div>
    </div>
    <div style="margin:15px 0;text-align:center;">
      <img id="popupImg" src="" alt="Komponen" style="max-width:240px;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,0.15);">
    </div>


    <div class="popup-actions">
      <button class="btn btn-close" onclick="closePopup()">Tutup</button>
      <button class="btn btn-link" id="moreBtn" onclick="moreInfo()">Info Lainnya</button>
    </div>
  </div>
</div>

<script>
/*
  Hotspot data:
  top/left in percentages relative to image container.
  title and description for popup and list.
  Positions approximated visually — sesuaikan jika perlu.
*/
const hotspots = [
  {id:1, top:"3.5%",  left:"16.1%",  title:"Isolator Tumpu 20 kV", desc:"Isolator tumpu untuk menahan konduktor pada tiang dan mencegah arus bocor ke tanah.", img: "Isolator.jpg"},
  {id:2, top:"2.9%",  left:"63.7%",  title:"Isolator dan Crossarm", desc:"Isolator pada crossarm yang menahan konduktor dan memberikan isolasi listrik.", img: ""},
  {id:3, top:"18.5%", left:"5.7%",  title:"Tongkat/Gudang Penampang", desc:"Perlengkapan penghubung dan penopang konduktor di kepala tiang.", img: ""},
  {id:4, top:"18.3%", left:"36.55%",  title:"Isolator Tumpu 20 kV", desc:"Isolator tumpu untuk menahan konduktor pada tiang dan mencegah arus bocor ke tanah.", img: ""},
  {id:5, top:"19.1%", left:"86.8%",  title:"Perlengkapan Sambungan Konduktor", desc:"Sambungan dan aksesori pada bagian penyangga pole sisi kanan.", img: ""},
  {id:6, top:"31.4%", left:"88.19%",  title:"Transformator Distribusi", desc:"Transformator menurunkan tegangan dari 20 kV ke 220/380 V untuk distribusi pelanggan.", img: "trafo.jpg"},
  {id:7, top:"49%", left:"70%",  title:"Panel/Kotak Proteksi", desc:"Kotak proteksi dan peralatan kontrol pada sisi transformator.", img: ""},
  {id:8, top:"92.9%", left:"35.75%",  title:"Sistem Grounding / Tanah", desc:"Sistem grounding untuk keselamatan listrik dan proteksi terhadap gangguan.", img: ""},
  {id:9, top:"70.8%", left:"50.6%",  title:"Perlengkapan Fuse/OLTC", desc:"Perangkat proteksi seperti fuse, relay, atau aksesori lainnya pada tiang.", img: ""},
  {id:10, top:"69.5%", left:"90.8%", title:"Tiang Beton/Struktur Penopang", desc:"Tiang penopang utama pada sisi kanan yang menahan beban struktur.", img: ""},
  {id:11, top:"28%", left:"5.5%",  title:"Tangki/Papan Akses", desc:"Komponen akses untuk maintenance atau penempatan peralatan di tiang.", img: ""},
  {id:12, top:"41.5%", left:"30%",  title:"Papan Kerja / Platform", desc:"Platform kerja atau bracket yang digunakan untuk akses teknisi.", img: ""},
  {id:13, top:"51.95%", left:"9.2%",  title:"Konduktor Penurun / Neutral", desc:"Konduktor penurun atau kawat netral menuju sambungan distribusi bawah.", img: ""}
];

// Helper to create hotspots in DOM
const container = document.getElementById('imageContainer');
const listDiv = document.getElementById('list');
const highlight = document.getElementById('highlight');
const popupBg = document.getElementById('popupBg');
const popupNum = document.getElementById('popupNum');
const popupTitle = document.getElementById('popupTitle');
const popupDesc = document.getElementById('popupDesc');

function createHotspots(){
  hotspots.forEach(h => {
    // create hotspot button
    const el = document.createElement('button');
    el.className = 'hotspot';
    el.innerText = h.id;
    el.setAttribute('data-id', h.id);
    el.style.top = h.top;
    el.style.left = h.left;
    el.onclick = () => openInfo(h.id);
    container.appendChild(el);

    // create list item in side panel
    const item = document.createElement('div');
    item.className = 'list-item';
    item.innerHTML = `
      <div class="list-number">${h.id}</div>
      <div class="list-body">
        <div style="font-weight:700;color:var(--pln-blue)">${h.title}</div>
        <div class="small">${h.desc.slice(0,90)}${h.desc.length>90?'...':''}</div>
      </div>`;
    item.onclick = () => openInfo(h.id);
    listDiv.appendChild(item);
  });
}

// Show popup + highlight
function openInfo(id){
  const data = hotspots.find(x=>x.id===id);
  if(!data) return;
  // set popup text
  popupNum.innerText = data.id;
  popupTitle.innerText = data.title;
  popupDesc.innerText = data.desc;
  document.getElementById('popupImg').src = data.img || "";


  // position & show highlight
  highlight.style.top = data.top;
  highlight.style.left = data.left;
  highlight.classList.add('active');

  // style highlight color subtle with PLN colors
  highlight.style.boxShadow = "0 0 18px rgba(15,59,179,0.18), 0 0 0 6px rgba(255,212,0,0.12)";

  // show popup
  popupBg.style.display = 'flex';

  // mark active hotspot (make popup focus visible)
  // also animate the hotspot scale in
  document.querySelectorAll('.hotspot').forEach(h => {
    h.style.boxShadow = '0 6px 14px rgba(0,0,0,0.12)';
    h.style.transform = 'translate(-50%,-50%)';
  });
  const clicked = document.querySelector(`.hotspot[data-id="${id}"]`);
  if(clicked){
    clicked.style.transform = 'translate(-50%,-50%) scale(1.1)';
    clicked.style.boxShadow = '0 10px 26px rgba(15,59,179,0.18)';
  }

  // accessibility: focus popup
  setTimeout(()=> {
    const btn = document.querySelector('.btn-close');
    if(btn) btn.focus();
  }, 220);
}

// Close popup & remove highlight
function closePopup(e){
  // if clicked background or button
  if(e && e.type === 'click' && e.target && e.target.id !== 'popupBg') return;
  popupBg.style.display = 'none';
  highlight.classList.remove('active');
  document.querySelectorAll('.hotspot').forEach(h => {
    h.style.boxShadow = '';
    h.style.transform = 'translate(-50%,-50%)';
  });
}

function moreInfo(){
  // placeholder: you can expand to go to a detail page or show images
  alert('Fitur "Info Lainnya" belum diimplementasikan. Bisa diarahkan ke dokumen teknis atau PDF.');
}

// Initialize
createHotspots();

// Click outside popup to close handled by popupBg onclick
// Also close on ESC
document.addEventListener('keydown', (ev) => {
  if(ev.key === 'Escape') closePopup();
});
</script>
<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js")
    .then(() => console.log("Service Worker Registered"));
}
</script>

</body>
</html>

